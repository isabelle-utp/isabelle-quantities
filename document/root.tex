\documentclass[11pt,a4paper]{book}
\usepackage{isabelle,isabellesym}
\usepackage{graphicx}
\graphicspath {{figures/}}

% further packages required for unusual symbols (see also
% isabellesym.sty), use only when needed


\usepackage{latexsym}
\usepackage{amssymb}
  %for \<leadsto>, \<box>, \<diamond>, \<sqsupset>, \<mho>, \<Join>,
  %\<lhd>, \<lesssim>, \<greatersim>, \<lessapprox>, \<greaterapprox>,
  %\<triangleq>, \<yen>, \<lozenge>

%\usepackage[greek,english]{babel}
  %option greek for \<euro>
  %option english (default language) for \<guillemotleft>, \<guillemotright>

%\usepackage[latin1]{inputenc}
  %for \<onesuperior>, \<onequarter>, \<twosuperior>, \<onehalf>,
  %\<threesuperior>, \<threequarters>, \<degree>

%\usepackage[only,bigsqcap]{stmaryrd}
  %for \<Sqinter>

%\usepackage{eufrak}
  %for \<AA> ... \<ZZ>, \<aa> ... \<zz> (also included in amssymb)

%\usepackage{textcomp}
  %for \<cent>, \<currency>

% this should be the last package used
\usepackage{pdfsetup}

% urls in roman style, theory text in math-similar italics
\urlstyle{rm}
\isabellestyle{it}
\newcommand{\HOL}[1]{\verb{HOL}}
\newcommand{\eg}[1]{e.g.}
\renewcommand{\isasymdegree}{XXX}
\newcommand{\acs}[1]{\textsc{#1}} 

\begin{document}

\title{A Sound Type-System for Physical Quantities and Measurements}
\author{Simon Foster \and Burkhart Wolff}
\maketitle

\textbf{ Abstract } 

The present Isabelle theory builds a formal model for both the \emph{International System of Quantities}
(ISQ) and the \emph{International System of Units} (SI), which are both fundamental for physics
and engineering~\cite{bipm-jcgm:2012:VIM}. Both the ISQ and the SI were deeply integrated into 
Isabelle's type system, i.e. quantities and units were represented in a way that 
they have a  \emph{quantity type} as well as \emph{unit type} based on its base vectors and their 
magnitudes. Since the underlying "algebra of quantities" from ~\cite{bipm-jcgm:2012:VIM} induces 
congruences on  quantity and SI types, specific tactic support has been developed to capture these.
Our construction is validated by a test-set of known equivalences between both quantities and SI units.
Moreover, the presented theory can be used for type-safe conversions between the SI system and
others, like the British Imperial System (BIS).

\tableofcontents

% sane default for proof documents
\parindent 0pt\parskip 0.5ex


\chapter{Introduction}

Modern Physics is based on the concept of quantifiable properties of physical phenomena such 
as mass, length, time, etc. These phenomena, called \emph{quantities}, are linked via an 
\emph{algebra of quantities} to derived concepts such as speed, force, and energy. The latter 
allows for a \emph{dimensional analysis} of physical equations, which had already been the 
backbone of Newtonian Physics. In parallel, physicians developped an own research field called 
"metrology" defined as scientific study of the \emph{measurement} of physical quantities.


The relevant international standard for quantities and measurements is distributed by the
\emph{Bureau International des Poids et des Mesures} (BIPM), which also develops and distributes
the \emph{Vocabulaire International de M\`etrologie} (VIM) \cite{bipm-jcgm:2012:VIM}.
The VIM actually defines two systems: the \emph{International System of Quantities}
(ISQ) and the \emph{International System of Units} (SI, abbreviated from the French  Syst\`eme 
international (d’unit\'es)). Finally, the VIM defines concrete reference measurement procedures 
as well as a terminology for measurement errors. 

Conceived as a refinement of the ISQ, the SI comprises a coherent system of units of measurement built
 on seven base units, which are the second, metre, kilogram, ampere, kelvin, mole, candela, and a 
set of twenty prefixes to the unit names and unit symbols that may be used when specifying multiples 
and fractions of the units. The system also specifies names for 22 derived units, such as lumen and 
watt, for other common physical quantities. While there is still nowadays a wealth of different 
measuring systems such as the \emph{British Imperial System} (BIS) and the \emph{United States 
customary system} (USC), the SI became more or less the de-facto reference behind all these systems.

The present Isabelle theory builds a formal model for both the ISQ and the SI, together with a 
deep integration into Isabelle's type system. Quantities and units were represented in a way that 
they have a  \emph{quantity type} as well as \emph{unit type} based on its 
base vectors and their magnitudes. Since the algebra of quantities induces congruences on 
quantity and SI types, specific tactic support has been developed to capture these.
Our construction is validated by a test-set of known equivalences between both quantities and SI units.
Moreover, the presented theory can be used for type-safe conversions between the SI system and
others, like the British Imperial System (BIS).

% The International System of Units (SI, abbreviated from the French
% Système International (d'unités)) is the modern form of the metric
% system and is the most widely used system of measurement. It comprises
% a coherent system of units of measurement built on seven base units,
% which are the second, metre, kilogram, ampere, kelvin, mole, candela,
% and a set of twenty prefixes to the unit names and unit symbols that
% may be used when specifying multiples and fractions of the units.
% The system also specifies names for 22 derived units, such as lumen and
% watt, for other common physical quantities.
% 
% (cited from \url{https://en.wikipedia.org/wiki/International_System_of_Units}).

In more detail, the ISQ provides the following fundamental concepts:
%
\begin{enumerate}%
\item \emph{quantities}, which are seen as a scalar vectorspace over the base vectors
      \emph{time}, \emph{length}, \emph{mass}, \emph{electric current},
      \emph{temperature}, \emph{amount of substance}, and \emph{luminous intensity},
 
\item \emph{dimensions}, i.e. a set of the symbols  \isa{T}, \isa{L}, \isa{M}, \isa{I},  
      \isa{{\isasymTheta}}, \isa{N}, \isa{J}  corresponding to the above mentioned base 
      quantities, indexed by an integer exponent,

\item \emph{derived dimensions} such as \emph{volume} $\isa{L}^3$ or energy 
      $\isa{M}\isa{L}^2\isa{T}^{-2}$ corresponding to \emph{derived quantities}, 

\item \emph{magnitudes}, i.e. the scalar component in the quantity vector-space, and a

\item \item{quantity calculus} consisting of \item{quantity equations} allowing to infer that 
      $\isa{L}\isa{T}^{-1}\isa{T}^{-1}\isa{M} = \isa{M}\isa{L}\isa{T}^{-2} = \isa{F} $ 
      (the left-hand-side equals mass times acceleration which is equal to force). 
\end{enumerate}

On the other side, the SI refines the ISQ with the following fundamental concepts:
\begin{enumerate}%
\item measuring units corresponding to the ISQ base quantities sich
      as \emph{second}, \emph{meter}, \emph{kilogram}, \emph{ampere}, \emph{kelvin}, \emph{mole} and
      \emph{candela} \footnote{together with procedures how to measure a meter, for example, which are
      defined in accompanying standards},
\item a standardized set of symbols for units such as $s$,$m$,$kg$,$A$,$K$,$mol$ and $cd$,
\item a standardized set of symbols of SI prefixes for multiples of SI units, such as 
      $giga$ ($=10^9$), $kilo$ ($=10^3$), $milli$ ($=10^-3$), etc., and a set of
\item \emph{unit equations} and conversion equations such as $J = kg\,m^2/s^2$ or $1 km/h = 1/3.6\,m/s$

\end{enumerate}

The purpose of the presented theory is to model quantities and SI units with polymorphic magnitudes 
inside the Isabelle/HOL\cite{nipkow.ea:isabelle:2002} system. The objective of our construction is to
reflect the types of the magnitudes as well as their dimensions in order to allow type-safe 
calculations on SI units and their conversion to other measuring systems.


TODO : REVISE THIS ...

As a result, it is possible to express "4500.0 kilogram times meter per second square" which can
have the type 
\isa{{\isasymreal}\ {\isacharbrackleft}M\ \isactrlsup {\isachardot}\ L\ \isactrlsup 
 {\isachardot}\ T\isactrlsup {\isacharminus}\isactrlsup {\isadigit{3}} 
 \isactrlsup {\isachardot}\   T\isactrlsup {\isadigit{1}}{\isacharbrackright}}. 
For units of this type we can infer that this corresponds to the derived unit "4.5 kN" (kilo-Newton) 
 of type \isa{{\isasymreal}\ {\isacharbrackleft}M\ \isactrlsup {\isachardot}\ L\ \isactrlsup 
 {\isachardot}\ T\isactrlsup {\isacharminus}\isactrlsup {\isadigit{2}}{\isacharbrackright}}.  

This is an attempt to model the standard SI system and its derived entities (cf.
\url{https://www.quora.com/What-are-examples-of-SI-units}),
both from a type-checking as well as a proof-support perspective.
These design objectives are for the case of Isabelle system somewhat contradictory.
Since the Isabelle type system follows the Curry-style paradigm, which can be 
characterized by: "be as implicit as possible, inference as automatic as possible", it is not
possible to do computations on type-terms (in contrast to, for example, Coq). We therefore
need a more involved construction using Isabelle's type-classes to establish a semantic 
interpretation on certain classes of types. This paves the way to derive rules that
establish and exploit type isomorphisms implicitely. For example, the implicit
type isomorhisms for the dimensions $T^{-2} * T$ and $T^{-1}$ is dealt with appropriate
rules on terms and a special form of equivalence. 

Our construction proceeds in three phases:
\begin{enumerate}%
\item We construct a type \isa{Dimension} which is basically a "semantic representation" or
"semantic domain" of all SI dimensions. Since SI-types have an interpretation in this domain,
it serves to give semantics to type-constructors by operations on this domain, too.
We construct a multiplicative group on it.

\item From \isa{Dimension} we build a language of type-constructors of \isa{dimS}-types, 
 captured in a type class \isa{dim-types} giving it a pseudo-inductive structure. Types of
 this class are required to have  an interpretation function into \isa{Dimension}'s, which
 allows for establishing equivalences on \isa{dim-types}.
      
\item We construct a SI Unit-type as a pair of a polymorphic magnitude and a dimension type.
  This type will be inhabited by all basic SI units and predicates expressing their relationship.
\end{enumerate}%

On this basis, an algebra of SI units can be derived; while types can not be "touched" inside
an Isabelle/HOL logic, it is possible to transform unit types by applying rules of this algebra.
Tactical support over this algebra is provided enabling the construction of normal forms on 
both units and their type.  

\subsubsection{Previous Attempts.} The work of \cite{HayesBrendan95} represents to our knowledge a
first attempt to formalize SI units in Z, thus a similar language of HOL. While our typing
representation is more rigourous due to the use of type-classes, this works lacks any attempt
to support formal and automated deduction on Si unit equivalences.

MORE TO COME.

\input{session}

% optional bibliography
\bibliographystyle{abbrv}
\bibliography{root}

\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
